"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");require("prop-types");var t=require("@reach/descendants"),n=require("@reach/utils"),a=require("@reach/auto-id");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(e);function i(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=e[n]);return r}var d,s,u=t.createDescendantContext("TabsDescendantsContext"),c=t.createDescendantContext("TabPanelDescendantsContext"),l=n.createNamedContext("TabsContext",{});(d=exports.TabsKeyboardActivation||(exports.TabsKeyboardActivation={})).Auto="auto",d.Manual="manual",(s=exports.TabsOrientation||(exports.TabsOrientation={})).Horizontal="horizontal",s.Vertical="vertical";var f=n.forwardRefWithAs((function(r,d){var s,c=r.as,f=void 0===c?"div":c,b=r.children,v=r.defaultIndex,x=r.orientation,p=void 0===x?exports.TabsOrientation.Horizontal:x,h=r.index,m=void 0===h?void 0:h,I=r.keyboardActivation,y=void 0===I?exports.TabsKeyboardActivation.Auto:I,T=r.onChange,R=r.readOnly,C=void 0!==R&&R,E=i(r,["as","children","defaultIndex","orientation","index","keyboardActivation","onChange","readOnly"]),k=e.useRef(null!=m);n.useControlledSwitchWarning(m,"index","Tabs");var A=a.useId(E.id),D=null!==(s=E.id)&&void 0!==s?s:n.makeId("tabs",A),w=e.useRef(!1),F=e.useRef(null),O=e.useRef(!1),S=n.useControlledState(m,null!=v?v:0),K=S[0],g=S[1],P=e.useState(-1),W=P[0],j=P[1],M=t.useDescendantsInit(),q=M[0],B=M[1],L=e.useMemo((function(){return{focusedIndex:W,id:D,isControlled:k.current,isRTL:O,keyboardActivation:y,onFocusPanel:function(){F.current&&n.isFunction(F.current.focus)&&F.current.focus()},onSelectTab:C?n.noop:function(e){w.current=!0,T&&T(e),g(e)},onSelectTabWithKeyboard:C?n.noop:function(e){switch(w.current=!0,y){case exports.TabsKeyboardActivation.Manual:var t=q[e]&&q[e].element;return void(t&&n.isFunction(t.focus)&&t.focus());case exports.TabsKeyboardActivation.Auto:default:return T&&T(e),void g(e)}},orientation:p,selectedIndex:K,selectedPanelRef:F,setFocusedIndex:j,setSelectedIndex:g,userInteractedRef:w}}),[W,D,y,T,p,C,K,g,q]);return e.useEffect((function(){return n.checkStyles("tabs")}),[]),o.default.createElement(t.DescendantProvider,{context:u,items:q,set:B},o.default.createElement(l.Provider,{value:L},o.default.createElement(f,Object.assign({},E,{ref:d,"data-reach-tabs":"","data-orientation":p,id:E.id}),n.isFunction(b)?b({focusedIndex:W,id:D,selectedIndex:K}):b)))})),b=n.forwardRefWithAs((function(a,r){var d=a.children,s=a.as,c=void 0===s?"div":s,f=a.onKeyDown,b=i(a,["children","as","onKeyDown"]),v=e.useContext(l),x=v.focusedIndex,p=v.isControlled,h=v.isRTL,m=v.keyboardActivation,I=v.onSelectTabWithKeyboard,y=v.orientation,T=v.selectedIndex,R=v.setSelectedIndex,C=t.useDescendants(u),E=e.useRef(null),k=n.useForkedRef(r,E);e.useEffect((function(){E.current&&(E.current.ownerDocument&&"rtl"===E.current.ownerDocument.dir||"rtl"===n.getElementComputedStyle(E.current,"direction"))&&(h.current=!0)}),[h]);var A=n.useEventCallback(n.wrapEvent(f,t.useDescendantKeyDown(u,{currentIndex:m===exports.TabsKeyboardActivation.Manual?x:T,orientation:y,rotate:!0,callback:I,filter:function(e){return!e.disabled},rtl:h.current})));return n.useIsomorphicLayoutEffect((function(){var e;if(!p&&n.boolOrBoolString(null===(e=C[T])||void 0===e?void 0:e.disabled)){var t=C.find((function(e){return!e.disabled}));t&&R(t.index)}}),[C,p,T,R]),o.default.createElement(c,Object.assign({role:"tablist","aria-orientation":y},b,{"data-reach-tab-list":"",ref:k,onKeyDown:A}),e.Children.map(d,(function(e,t){return n.cloneValidElement(e,{isSelected:t===T})})))})),v=n.memoWithAs(b),x=n.forwardRefWithAs((function(a,r){var d=a.children,s=a.as,c=void 0===s?"button":s,f=a.index,b=a.disabled,v=a.onBlur,x=a.onFocus,p=i(a,["children","isSelected","as","index","disabled","onBlur","onFocus"]),h=e.useContext(l),m=h.id,I=h.onSelectTab,y=h.orientation,T=h.selectedIndex,R=h.userInteractedRef,C=h.setFocusedIndex,E=e.useRef(null),k=n.useForkedRef(r,E),A=t.useDescendant({element:E.current,disabled:!!b},u,f),D="button"===c&&null==p.type?"button":p.type,w=A===T;n.useUpdateEffect((function(){w&&E.current&&R.current&&(R.current=!1,n.isFunction(E.current.focus)&&E.current.focus())}),[w,R]);var F=n.useEventCallback(n.wrapEvent(x,(function(){C(A)}))),O=n.useEventCallback(n.wrapEvent(v,(function(){C(-1)})));return o.default.createElement(c,Object.assign({"aria-controls":n.makeId(m,"panel",A),"aria-disabled":b,"aria-selected":w,role:"tab",tabIndex:w?0:-1},p,{ref:k,"data-reach-tab":"","data-orientation":y,"data-selected":w?"":void 0,disabled:b,id:n.makeId(m,"tab",A),onClick:function(){I(A)},onFocus:F,onBlur:O,type:D}),d)})),p=n.forwardRefWithAs((function(a,r){var d=a.children,s=a.as,u=void 0===s?"div":s,l=i(a,["children","as"]),f=e.useRef(),b=n.useForkedRef(f,r),v=t.useDescendantsInit();return o.default.createElement(t.DescendantProvider,{context:c,items:v[0],set:v[1]},o.default.createElement(u,Object.assign({},l,{ref:b,"data-reach-tab-panels":""}),d))})),h=n.memoWithAs(p),m=n.forwardRefWithAs((function(a,r){var d=a.children,s=a.as,u=void 0===s?"div":s,f=i(a,["children","aria-label","as"]),b=e.useContext(l),v=b.selectedPanelRef,x=b.selectedIndex,p=b.id,h=e.useRef(null),m=t.useDescendant({element:h.current},c),I=n.makeId(p,"panel",m),y=m===x,T=e.useRef(!1),R=!!T.current&&!y;o.default.useEffect((function(){T.current=!0}),[]);var C=n.useForkedRef(r,h,y?v:null);return o.default.createElement(u,Object.assign({"aria-labelledby":n.makeId(p,"tab",m),hidden:R,role:"tabpanel",tabIndex:y?0:-1},f,{ref:C,"data-reach-tab-panel":"",id:I}),d)}));exports.Tab=x,exports.TabList=v,exports.TabPanel=m,exports.TabPanels=h,exports.Tabs=f,exports.useTabsContext=function(){var t=e.useContext(l),n=t.focusedIndex,a=t.id,r=t.selectedIndex;return e.useMemo((function(){return{focusedIndex:n,id:a,selectedIndex:r}}),[n,a,r])};
//# sourceMappingURL=tabs.cjs.production.min.js.map
